(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{106:function(e,t,n){e.exports={main:"app_main__10WoL"}},107:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__3ANk1"}},109:function(e,t,n){e.exports={loader:"loader_loader__2ygAD",spin:"loader_spin__2UBHq"}},111:function(e,t,n){e.exports={bgForCheck:"order-details_bgForCheck__1Nj8M"}},112:function(e,t,n){e.exports={menu:"profile-menu_menu__1b59K"}},113:function(e,t,n){e.exports={main:"scrollable-list_main__3ExZa",mainReversed:"scrollable-list_mainReversed__2MEoO scrollable-list_main__3ExZa",temporary:"scrollable-list_temporary__3ooEJ"}},123:function(e,t,n){},15:function(e,t,n){e.exports={wrap:"ingridient-details_wrap__2JGDy",modalHeader:"ingridient-details_modalHeader__1R8jG",ingrImage:"ingridient-details_ingrImage__64rnG",ingrInfo:"ingridient-details_ingrInfo__3NL6K",nutrient:"ingridient-details_nutrient__1F9um",nutrientHeader:"ingridient-details_nutrientHeader__3BBXY",nutrientValue:"ingridient-details_nutrientValue__3ee9n"}},16:function(e,t,n){e.exports={header:"app-header_header__1SaPq","header-flex":"app-header_header-flex__1b8S3",headerContainer:"app-header_headerContainer__kPTHQ app-header_header-flex__1b8S3",userPanel:"app-header_userPanel__2F6h8",navBurgerBuilder:"app-header_navBurgerBuilder__19Hs1 app-header_header-flex__1b8S3",navButton:"app-header_navButton__ZNs7g app-header_header-flex__1b8S3",authButton:"app-header_authButton__11phM app-header_header-flex__1b8S3 app-header_navButton__ZNs7g app-header_header-flex__1b8S3",headerButton:"app-header_headerButton__qYIya",navlink:"app-header_navlink__iUrjH",buttonCaption:"app-header_buttonCaption__280yW"}},17:function(e,t,n){e.exports={headerSection:"feed_headerSection__2RsgT",feedData:"feed_feedData__-mL1q",feedContent:"feed_feedContent__2yirZ",feedChart:"feed_feedChart__8nM2E",currentOrders:"feed_currentOrders__2-UDs",currentChart:"feed_currentChart__2oCw-",ul:"feed_ul__2xcqb",liElem:"feed_liElem__3znO_",totalChart:"feed_totalChart__3Vq5L",totalBlock:"feed_totalBlock__3KEch",bigHeader:"feed_bigHeader__QKejj"}},19:function(e,t,n){e.exports={main:"feed-detailed-card_main__2YiY_",number:"feed-detailed-card_number__2pOz_",header:"feed-detailed-card_header__2vYQw",status:"feed-detailed-card_status__2S9tl",ingr:"feed-detailed-card_ingr__2CkSv",plane:"feed-detailed-card_plane__128B0",ingrList:"feed-detailed-card_ingrList__1iqeD",price:"feed-detailed-card_price__2xs0z",imgContainer:"feed-detailed-card_imgContainer__3ihl5",ingrItem:"feed-detailed-card_ingrItem__3cpL_",ingrIdent:"feed-detailed-card_ingrIdent__1FuaN",priceContainer:"feed-detailed-card_priceContainer__2AFwh",ingrPrice:"feed-detailed-card_ingrPrice__2whBU"}},198:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(43),i=n.n(c),s=(n(123),n(106)),o=n.n(s),l=n(12),u=n(52),d=u.c,j=function(){return Object(u.b)()},b=n(11),m=n.n(b),p=n(21);function f(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString()),t&&(t=encodeURIComponent(t));var c=e+"="+t;for(var i in n){c+="; "+i;var s=n[i];!0!==s&&(c+="="+s)}document.cookie=c}var _=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},h=function(){var e=_("accessToken");return e=e?e.split("Bearer ")[1]:""};function O(e){f(e,null,{expires:-1})}var g="https://norma.nomoreparties.space/api",x=g+"/auth/user",v="wss://norma.nomoreparties.space/orders",y=v+"/all";var I="LOGIN_SUCCESSFUL",N="SET_USER_DATA",C="LOGIN_FAILED",D="LOGOUT_SUCCESSFUL",k="ALLOW_RESET_PASSWORD",S="HAS_RESET_PASSWORD",E=function(e){return function(t){(function(e){return fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e}))})(e).then((function(e){var n=e.user,r=e.accessToken,a=e.refreshToken;t({type:I,name:n.name,email:n.email,isLoggedIn:!0}),f("accessToken",r,{expires:1200}),localStorage.setItem("refreshToken",a)})).catch((function(e){}))}},w=function(e){return function(t){(function(e){return fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e}))})(e).then((function(e){var n=e.user,r=e.accessToken,a=e.refreshToken;!0===e.success&&(t({type:I,name:n.name,email:n.email}),f("accessToken",r,{expires:1200}),localStorage.setItem("refreshToken",a))})).catch((function(e){t({type:C})}))}},T=function(){return function(e){fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.success,e})).then((function(t){!0===t.success&&(O("accessToken"),localStorage.removeItem("refreshToken"),e({type:D}))})).catch((function(t){O("accessToken"),localStorage.removeItem("refreshToken"),e({type:D})}))}},L=function(e){return function(t){var n;(n=e,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:n})}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e}))).then((function(e){!0===e.success&&(t({type:k}),f("canResetPassword","yes",{expires:3600}))})).catch((function(e){}))}},P=function(e,t){return function(n){(function(e,t){return fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:e,token:t})}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e}))})(e,t).then((function(e){!0===e.success&&(n({type:S}),f("canResetPassword","no",{expires:-1}))})).catch((function(e){}))}},R=function(e,t){return function(n){(function(e){return fetch(x,{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:_("accessToken")},body:JSON.stringify({name:e.name,email:e.email,password:e.password})}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.success,e}))})(e).then((function(e){n({type:N,name:e.user.name,email:e.user.email}),t({name:e.user.name,email:e.user.email,password:""})}))}},B=function(e){return function(t){fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return!1!==e.success&&e})).then((function(n){var r=n.accessToken,a=n.refreshToken;f("accessToken",r,{expires:1200}),localStorage.setItem("refreshToken",a),t(A(e))})).catch((function(e){}))}},A=function(e){return++e>2?function(){}:function(t){fetch(x,{headers:{method:"GET","Content-Type":"application/json;charset=utf-8",authorization:_("accessToken")}}).then(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.t0=Promise,e.next=5,t.json();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.reject.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.success,e})).then((function(e){var n=e.user;!0===e.success&&t({type:N,name:n.name,email:n.email})})).catch((function(n){"jwt expired"===n.message&&t(B(e))}))}},M=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null!=_("accessToken"),r=null!=localStorage.getItem("refreshToken"),!n){e.next=6;break}return 0,t(A(0)),e.abrupt("return","has logged in");case 6:if(n||!r){e.next=10;break}return 1,t(B(1)),e.abrupt("return","has refreshed tokens, than logged in");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},V="TOGGLE_MODAL_VISIBILITY",H="SET_CURRENT_MODAL_TYPE",U="SET_INGRIDIENT_IN_MODAL",G="SET_ORDER_STATE",F="INGRIDIENT_FETCH_SUCCESS",z="INGRIDIENT_FETCH_ERROR",J="OPEN_MODAL",W="CLOSE_MODAL",Y="SET_CURRENT_MODAL_TYPE",Z="ADD_BUN",q="ADD_SAUCE",X="ADD_MAIN",K="UPDATE_DRAGGABLE_INGRIDIENTS",Q="REMOVE_ALL_INGRIDIENTS",$="RESORT_DRAGGABLE_INGRIDIENTS",ee="SET_CONSTRUCTOR_LOADER",te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return function(n){n({type:ee,value:!0}),fetch(e,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",authorization:_("accessToken")},body:JSON.stringify(t())}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){n({type:G,value:e}),n({type:ee,value:!1})})).then((function(){n({type:J}),n({type:Y,value:"OrderDetails"}),n({type:Q})})).catch((function(e){}))}},ne=n(2),re=n(117),ae=n(0);function ce(e){var t=e.children,n=Object(re.a)(e,["children"]),r=d((function(e){return e.user})),a=r.isLoggedIn,c=r.userChecked;return localStorage.getItem("refreshToken")&&!c?null:Object(ae.jsx)(l.b,Object(ne.a)(Object(ne.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(ae.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))}var ie=n(82),se=n.n(ie),oe=n(107),le=n.n(oe),ue=function(e){var t=e.handleClick,n=e.children;return Object(ae.jsx)("div",{className:le.a.modalOverlay,onClick:t,children:n})},de=n(6),je=function(e){var t=e.children,n=j(),a=Object(l.g)(),c=Object(l.h)(),s=d((function(e){return e.burgerVendor.currentModalType})),o=document.getElementById("react-modals"),u=function(){if(n({type:W}),n({type:Y,value:"none"}),"OrderDetails"===s)return a.push({state:{background:c}});a.goBack()};return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&u()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}})),i.a.createPortal(Object(ae.jsx)(ue,{handleClick:u,children:Object(ae.jsxs)("article",{className:se.a.modal,onClick:function(e){e.stopPropagation()},children:[Object(ae.jsx)("button",{onClick:u,className:se.a.closeButton,children:Object(ae.jsx)(de.CloseIcon,{type:"primary"})}),t]})}),o)},be=n(15),me=n.n(be);var pe=function(e){var t=e.ingredientData;return Object(ae.jsxs)("div",{className:me.a.wrap,children:[Object(ae.jsx)("h2",{className:me.a.modalHeader+" text  text_type_main-large mt-10 ml-10 mb-3",style:{},children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(ae.jsx)("img",{src:t.image_large,alt:t.name,className:me.a.ingrImage+" mb-4"}),Object(ae.jsx)("p",{className:"text  text_type_main-medium mb-4",children:t.name}),Object(ae.jsxs)("ul",{className:me.a.ingrInfo,children:[Object(ae.jsxs)("li",{className:me.a.nutrient,children:[Object(ae.jsx)("h5",{className:me.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(ae.jsx)("p",{className:me.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_calories",children:t.calories})]}),Object(ae.jsxs)("li",{className:me.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ae.jsx)("h5",{className:me.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(ae.jsx)("p",{className:me.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_proteins",children:t.proteins})]}),Object(ae.jsxs)("li",{className:me.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ae.jsx)("h5",{className:me.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(ae.jsx)("p",{className:me.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_fats",children:t.fat})]}),Object(ae.jsxs)("li",{className:me.a.nutrient+" text  text_type_main-default text_color_inactive",children:[Object(ae.jsx)("h5",{className:me.a.nutrientHeader+" text  text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(ae.jsx)("p",{className:me.a.nutrientValue+" text text_type_digits-default  text_color_inactive","test-id":"ingrDetails_carbo",children:t.carbohydrates})]})]})]})},fe=n(16),_e=n.n(fe),he=n(9);var Oe=function(){return Object(ae.jsx)("header",{className:_e.a.header,children:Object(ae.jsxs)("div",{className:_e.a.headerContainer,children:[Object(ae.jsx)("nav",{className:"text text_type_main-default",children:Object(ae.jsxs)("ul",{className:_e.a.navBurgerBuilder,children:[Object(ae.jsx)("li",{className:_e.a.headerButton,children:Object(ae.jsx)(he.b,{to:"/",className:_e.a.navlink,children:Object(ae.jsxs)("div",{className:_e.a.navButton,children:[Object(ae.jsx)(de.BurgerIcon,{type:"primary"}),Object(ae.jsx)("span",{className:_e.a.buttonCaption,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})})}),Object(ae.jsx)("li",{className:_e.a.headerButton,children:Object(ae.jsx)(he.b,{to:"/feed",className:_e.a.navlink,children:Object(ae.jsxs)("div",{className:_e.a.navButton+"  text_color_inactive",children:[Object(ae.jsx)(de.ListIcon,{type:"secondary"}),Object(ae.jsx)("span",{className:_e.a.buttonCaption,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})})]})}),Object(ae.jsx)(he.b,{to:"/",children:Object(ae.jsx)(de.Logo,{})}),Object(ae.jsx)("nav",{className:_e.a.userPanel+" text text_type_main-default",children:Object(ae.jsxs)(he.b,{className:_e.a.authButton+" "+_e.a.navlink+"  text_color_inactive",to:"/profile",children:[Object(ae.jsx)(de.ProfileIcon,{type:"secondary"}),Object(ae.jsx)("span",{className:_e.a.buttonCaption,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},ge=n(83),xe=n.n(ge),ve=n(10),ye=n(32),Ie=n.n(ye),Ne=n(61),Ce=n.n(Ne),De=n(209),ke=n(205),Se=function(e){var t=e.objIngridient,n=j(),c=Object(l.g)(),i=Object(l.h)(),s=Object(De.a)({type:"ingridient",item:t,collect:function(e){return{outline:e.isDragging()?"1px solid #4C4CFF":""}}}),o=Object(ve.a)(s,3),u=o[0].outline,b=o[1],m=o[2],p=a.a.useState(),f=Object(ve.a)(p,2),_=f[0],h=f[1],O=d((function(e){if("bun"===t.type)return e.burgerVendor.bun})),g=d((function(e){if("sauce"===t.type||"main"===t.type)return e.burgerVendor.draggableIngridients}));return Object(r.useEffect)((function(){h(function(){var e=0;return"bun"===t.type&&O&&O._id===t._id?2:(!g||"sauce"!==t.type&&"main"!==t.type||g.forEach((function(n){n._id===t._id&&e++})),e)}())}),[O,g,t]),Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(ke.a,{connect:m,src:t.image})," ",Object(ae.jsxs)("div",{className:Ce.a.ingrCard+" mb-8",onClick:function(){n({type:J}),n({type:Y,value:"IngridientDetails"}),n({type:U,value:t}),c.push({pathname:"/ingredients/".concat(t._id),state:{ingredientModal:i}})},ref:b,style:{outline:u},children:[Object(ae.jsx)("img",{src:t.image,alt:t.name,className:Ce.a.itemPic}),Object(ae.jsxs)("div",{className:Ce.a.price,children:[!!_&&Object(ae.jsx)(de.Counter,{count:_,size:"default"}),Object(ae.jsx)("span",{className:"m-2 text_type_digits-default",children:t.price}),Object(ae.jsx)(de.CurrencyIcon,{type:"primary"})]}),Object(ae.jsx)("h3",{className:"m-1 text_type_main-default",children:t.name})]})]})},Ee=function(e){var t=e.type,n=d((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})).filter((function(e){return e.type===t}));return Object(ae.jsx)(ae.Fragment,{children:n.map((function(e,t){return Object(ae.jsx)(Se,{objIngridient:e},e._id)}))})};var we=function(){var e=a.a.useState("bun"),t=Object(ve.a)(e,2),n=t[0],c=t[1],i=Object(r.useRef)(null),s=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),u=function(e){c(e),function(e){var t;"bun"===e?t=i:"sauce"===e?t=s:"main"===e&&(t=o),t&&t.current&&t.current.scrollIntoView({block:"start",behavior:"smooth"})}(e)};return Object(ae.jsxs)("section",{className:Ie.a.ingridiensContainer,children:[Object(ae.jsxs)("div",{className:Ie.a.tabs,children:[Object(ae.jsx)(de.Tab,{value:"bun",active:"bun"===n,onClick:u,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ae.jsx)(de.Tab,{value:"sauce",active:"sauce"===n,onClick:u,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ae.jsx)(de.Tab,{value:"main",active:"main"===n,onClick:u,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(ae.jsxs)("div",{className:Ie.a.ingrDisplay+" mt-10",ref:l,onScroll:function(){var e=l.current?l.current.getBoundingClientRect().top:0,t=i.current?i.current.getBoundingClientRect().top:0,n=s.current?s.current.getBoundingClientRect().top:0,r=o.current?o.current.getBoundingClientRect().top:0,a=Math.abs(e-t),u=Math.abs(e-n),d=Math.abs(e-r);c(a<u?"bun":u<d?"sauce":"main")},children:[Object(ae.jsxs)("div",{className:Ie.a.ingrShowcase,ref:i,children:[Object(ae.jsx)("h3",{className:"text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(ae.jsx)("div",{className:Ie.a.ingrList,children:Object(ae.jsx)(Ee,{type:"bun"})})]}),Object(ae.jsxs)("div",{className:Ie.a.ingrShowcase,ref:s,children:[Object(ae.jsx)("h3",{className:"text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(ae.jsx)("div",{className:Ie.a.ingrList,children:Object(ae.jsx)(Ee,{type:"sauce"})})]}),Object(ae.jsxs)("div",{className:Ie.a.ingrShowcase,ref:o,children:[Object(ae.jsx)("h3",{className:"text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(ae.jsx)("div",{className:Ie.a.ingrList,children:Object(ae.jsx)(Ee,{type:"main"})})]})]})]})},Te=n(38),Le=n.n(Te),Pe=n(85),Re=n.n(Pe),Be=n(210),Ae=function(e){var t=e.ingrInstanceID,n=e.ingrData,r=e.ingrIndexInStoreArr,a=e.resortIngrList,c=e.findIngridient,i=j(),s=d((function(e){return e.burgerVendor.draggableIngridients})),o=Object(De.a)((function(){return{type:"draggableIngridient",item:{ingrInstanceID:t,ingrIndexInStoreArr:r},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()||a(e.ingrInstanceID,e.ingrIndexInStoreArr)}}}),[t,r,a]),l=Object(ve.a)(o,3),u=l[0].isDragging,b=l[1],m=l[2],p=Object(Be.a)((function(){return{accept:"draggableIngridient",canDrop:function(){return!1},hover:function(e){var n=e.ingrInstanceID;if(n!==t){var r=c(t).ingrIndexInStore;a(n,r)}}}}),[c,a]),f=Object(ve.a)(p,2)[1],_=u?0:1;return Object(ae.jsxs)("div",{className:Re.a.draggableItime,ref:function(e){return f(m(e))},style:{opacity:_},children:[Object(ae.jsx)("button",{ref:b,className:Re.a.draggableButton,children:Object(ae.jsx)(de.DragIcon,{type:"primary"})}),Object(ae.jsx)(de.ConstructorElement,{text:n.name,thumbnail:n.image,price:n.price,handleClose:function(){var e=s.slice(0);e.splice(r,1),i({type:K,value:e})}})]})},Me=n(109),Ve=n.n(Me),He=function(){return Object(ae.jsx)("div",{className:Ve.a.loader})},Ue=n(110),Ge=n(207),Fe=n(212),ze=n(208),Je=n(211),We=function(e){var t=new Date,n=new Date(e),r=Object(Ge.a)(n,"HH:mm ")+"i-"+Object(Ge.a)(n,"O"),a=Object(Fe.a)(t.getTime(),n.getTime()),c="";return c=0===a?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===a?"\u0412\u0447\u0435\u0440\u0430":a<5?"".concat(a," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434"):a<20?"".concat(a," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434"):"".concat(Object(ze.a)(new Date(n),Date.now(),{locale:Je.a})," \u043d\u0430\u0437\u0430\u0434"),"".concat(c,", ").concat(r)},Ye=function(e){switch(e){case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case"pending":return"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f";default:return"\u041e\u0442\u043c\u0435\u043d\u0451\u043d"}},Ze=function(e){return e.reduce((function(e,t){return e+t.price}),0)},qe=function(e,t){var n,r=[],a=Object(Ue.a)(e.ingredients);try{var c=function(){var e=n.value;t.forEach((function(t){t._id===e&&r.push(t)}))};for(a.s();!(n=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return r};var Xe=function(){var e=j(),t=Object(l.g)(),n=d((function(e){return{chosenBun:e.burgerVendor.bun,chosenDraggableIngr:e.burgerVendor.draggableIngridients,isLoggedIn:e.user.isLoggedIn,loaderIsVisible:e.burgerVendor.constructorLoaderIsVisible}})),a=n.chosenBun,c=n.chosenDraggableIngr,i=n.isLoggedIn,s=n.loaderIsVisible,o=function(t){var n,r=Object(ne.a)(Object(ne.a)({},t),{},{instanceID:(new Date).getTime()});e({type:(n=t.type,"bun"===n?Z:"sauce"===n?q:"main"===n?X:"error"),value:r})},u=Object(Be.a)({accept:"ingridient",drop:function(e){!function(e){o(e)}(e)},collect:function(e){return{background:e.isOver()?"radial-gradient(circle, rgba(63,94,251,0.6110819327731092) 0%, rgba(252,70,107,0) 44%)":""}}}),b=Object(ve.a)(u,2),f=b[0].background,_=b[1],h=Object(r.useCallback)((function(e){var t=c.filter((function(t){return t.instanceID===e}))[0];return{objIngrData:t,ingrIndexInStore:c.indexOf(t)}}),[c]),O=function(t,n){var r=h(t).ingrIndexInStore;e({type:$,indexOfDraggedIngr:r,indexOfDroppedIngr:n})},g=Object(Be.a)((function(){return{accept:"draggableIngridient"}})),x=Object(ve.a)(g,2)[1];function v(){var e=[];return e.push(a._id),c.forEach((function(t){e.push(t._id)})),{ingredients:e}}var y=function(){var n=Object(p.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return",t.push({pathname:"/login"}));case 2:return n.abrupt("return",e(te("https://norma.nomoreparties.space/api/orders",v)));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(ae.jsxs)("section",{className:Le.a.container,ref:_,style:{background:f},children:[s?Object(ae.jsx)("div",{className:Le.a.loader,children:Object(ae.jsx)(He,{})}):null,Object(ae.jsxs)("ul",{className:Le.a.chosenIngridients+" mb-6",children:[a.name&&Object(ae.jsx)("li",{className:Le.a.topIngridinet,children:Object(ae.jsx)(de.ConstructorElement,{type:"top",isLocked:!0,text:a.name+" (\u0432\u0435\u0440\u0445)",thumbnail:a.image,price:a.price})}),c.length>0&&Object(ae.jsx)("li",{className:Le.a.draggableIngridinetContainer,ref:x,children:c.map((function(e,t){return Object(ae.jsx)(Ae,{ingrInstanceID:e.instanceID,ingrData:e,ingrIndexInStoreArr:t,resortIngrList:O,findIngridient:h},e.instanceID)}))}),a.name&&Object(ae.jsx)("li",{className:Le.a.bottomIngridinet,children:Object(ae.jsx)(de.ConstructorElement,{type:"bottom",isLocked:!0,text:a.name+" (\u043d\u0438\u0437)",thumbnail:a.image,price:a.price})})]}),Object(ae.jsx)("div",{className:Le.a.totalBar,children:a.name&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[function(){var e=2*a.price,t=0;return c.length>0&&(t=c.reduce((function(e,t){return e+Number(t.price)}),0)),e+t}(),Object(ae.jsx)(de.CurrencyIcon,{type:"primary"})]}),Object(ae.jsx)(de.Button,{type:"primary",size:"large",onClick:y,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})||Object(ae.jsx)("div",{style:{margin:"0 auto"},children:!a.name&&c.length<1&&Object(ae.jsxs)("span",{className:"text text_type_main-medium mr-10",style:{textAlign:"center",justifyContent:"center",display:"table-cell",paddingRight:"40px"},children:["\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b, ",Object(ae.jsx)("br",{}),"\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0431\u0443\u0440\u0433\u0435\u0440"]})||Object(ae.jsx)("span",{className:"text text_type_main-medium mr-10",style:{},children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})})})]})},Ke=n(111),Qe=n.n(Ke),$e=function(){var e=d((function(e){return e.burgerVendor.orderData}));return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("h2",{className:"text text_type_digits-large mt-30 mb-2",children:e.order.number}),Object(ae.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(ae.jsx)("div",{className:Qe.a.bgForCheck+" mb-15"}),Object(ae.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(ae.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},et=n(206),tt=n(116);var nt=function(){var e=d((function(e){return{modalIsVisible:e.burgerVendor.modalIsVisible,currentModalType:e.burgerVendor.currentModalType,ingrInModalData:e.burgerVendor.ingrInModalData,arrOfIngridients:e.burgerVendor.ingridientsData.arrOfIngridients,dataIsLoading:e.burgerVendor.ingridientsData.ingrDataIsLoading,dataHasError:e.burgerVendor.ingridientsData.ingrDataHasError}})),t=e.modalIsVisible,n=e.currentModalType,r=e.arrOfIngridients,a=e.dataIsLoading,c=e.dataHasError;return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("section",{className:xe.a.headerSection,children:Object(ae.jsx)("h1",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(ae.jsx)("section",{className:xe.a.constructorContainer,children:!a&&!c&&!!r&&!!r.length&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)(et.a,{backend:tt.a,children:[Object(ae.jsx)(we,{}),Object(ae.jsx)(Xe,{})]}),t&&"OrderDetails"===n&&Object(ae.jsx)(je,{children:Object(ae.jsx)($e,{})})]})})]})},rt=n(19),at=n.n(rt),ct=function(){var e=d((function(e){return e.ws.detailedOrder})),t=d((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})),n=null,r=null,a=null;t&&e&&(n=t.filter((function(t){return e.ingredients.includes(t._id)})),r=(a=t.filter((function(t){return e.ingredients.includes(t._id)})))[0],a=a.slice(1));var c=function(e){return Object(ae.jsx)("div",{className:at.a.imgContainer,style:{backgroundImage:"url(".concat(e,")")}})},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return e?Object(ae.jsxs)("li",{className:at.a.ingrItem,children:[Object(ae.jsxs)("div",{className:at.a.ingrIdent,children:[c(e.image_mobile),Object(ae.jsx)("span",{className:" text text_type_main-default",children:e.name})]}),Object(ae.jsxs)("div",{className:at.a.priceContainer,children:[Object(ae.jsxs)("span",{className:at.a.ingrPrice+" text text_type_digits-default",children:[t," x ",e.price]}),Object(ae.jsx)(de.CurrencyIcon,{type:"primary"})]})]},n):null};return Object(ae.jsxs)("article",{className:at.a.main,children:[Object(ae.jsxs)("span",{className:at.a.number+" text text_type_digits-default mb-10",children:[" ",e.number," "]}),Object(ae.jsxs)("h4",{className:at.a.header+" text text_type_main-medium mb-2",children:[" ",e.name," "]}),Object(ae.jsx)("span",{className:at.a.status+" text text_type_main-default mb-15",children:Ye(e.status)}),Object(ae.jsx)("h5",{className:at.a+" text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(ae.jsxs)("ul",{className:at.a.ingrList,children:[r?i(r,2,999):null,a?a.map((function(e,t){return i(e,1,t)})):null]}),Object(ae.jsxs)("div",{className:at.a.plane,children:[Object(ae.jsx)("span",{className:" text text_type_main-default text_color_inactive",children:We(e.createdAt)}),Object(ae.jsxs)("div",{className:at.a.price,children:[Object(ae.jsx)("span",{className:" text text_type_digits-default mr-2",children:n?Ze(qe(e,t)):null}),Object(ae.jsx)(de.CurrencyIcon,{type:"primary"})]})]})]})},it=n(25),st=n(27),ot=n.n(st);function lt(){var e=Object(r.useState)({email:"",password:""}),t=Object(ve.a)(e,2),n=t[0],a=t[1],c=d((function(e){return e.user})).isLoggedIn,i=j(),s=Object(l.h)();Object(r.useEffect)((function(){i(M())}),[i]);var o,u=function(e){a(Object(ne.a)(Object(ne.a)({},n),{},Object(it.a)({},e.target.name,e.target.value)))},b=Object(r.useCallback)((function(e){e.preventDefault(),i(w(n))}),[n,i]);return c?Object(ae.jsx)(l.a,{to:(null===(o=s.state)||void 0===o?void 0:o.from)||"/"}):Object(ae.jsx)("div",{className:ot.a.wrap,children:Object(ae.jsxs)("form",{className:"auth-form "+ot.a.form,onSubmit:b,children:[Object(ae.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(ae.jsx)(de.Input,{type:"email",placeholder:"E-mail",value:n.email,name:"email",onChange:u,error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ae.jsx)(de.PasswordInput,{value:n.password,name:"password",size:"default",onChange:u}),Object(ae.jsx)(de.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(ae.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"," ",Object(ae.jsx)(he.b,{to:"/registration",className:"text_color_link",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(ae.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ae.jsx)(he.b,{to:"/forgot-password",className:"text_color_link",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})}function ut(){var e=Object(r.useState)({email:"",name:"",password:""}),t=Object(ve.a)(e,2),n=t[0],a=t[1],c=d((function(e){return e.user})).isLoggedIn,i=j();Object(r.useEffect)((function(){i(M())}),[i]),Object(r.useEffect)((function(){a({email:"shamko.e.v+1@yandex.ru",name:"User1",password:"123123"})}),[c]);var s=function(e){a(Object(ne.a)(Object(ne.a)({},n),{},Object(it.a)({},e.target.name,e.target.value)))},o=Object(r.useCallback)((function(e){e.preventDefault(),i(E(n))}),[i,n]);return c?Object(ae.jsx)(l.a,{to:{pathname:"/"}}):Object(ae.jsx)("div",{className:ot.a.wrap,children:Object(ae.jsxs)("form",{className:"auth-form "+ot.a.form,onSubmit:o,children:[Object(ae.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ae.jsx)(de.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n.name,name:"name",onChange:s,error:!1,errorText:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u0433\u0430\u043b\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430"}),Object(ae.jsx)(de.Input,{type:"email",placeholder:"E-mail",value:n.email,name:"email",onChange:s,error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ae.jsx)(de.PasswordInput,{value:n.password,name:"password",size:"default",onChange:s}),Object(ae.jsx)(de.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(ae.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(ae.jsx)(he.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}function dt(){var e=Object(r.useState)({email:""}),t=Object(ve.a)(e,2),n=t[0],a=t[1],c=d((function(e){return e.user})),i=c.isLoggedIn,s=c.canResetPassword,o=j();Object(r.useEffect)((function(){a({email:"shamko.e.v@yandex.ru"})}),[]),Object(r.useEffect)((function(){o(M())}),[o]);var u=Object(r.useCallback)((function(e){e.preventDefault(),o(L(n.email))}),[o,n]);return i?Object(ae.jsx)(l.a,{to:{pathname:"/"}}):!i&&s?Object(ae.jsx)(l.a,{to:{pathname:"/reset-password"}}):Object(ae.jsx)("div",{className:ot.a.wrap,children:Object(ae.jsxs)("form",{className:"auth-form "+ot.a.form,onSubmit:u,children:[Object(ae.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ae.jsx)(de.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:n.email,name:"email",onChange:function(e){a(Object(ne.a)(Object(ne.a)({},n),{},Object(it.a)({},e.target.name,e.target.value)))},error:!1,errorText:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"}),Object(ae.jsx)(de.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(ae.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ae.jsx)(he.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}function jt(){var e=Object(r.useState)({password:"",resetCode:""}),t=Object(ve.a)(e,2),n=t[0],a=t[1],c=d((function(e){return e.user})),i=c.isLoggedIn,s=c.canResetPassword,o=c.hasResetPassword,u=j(),b=function(e){a(Object(ne.a)(Object(ne.a)({},n),{},Object(it.a)({},e.target.name,e.target.value)))},m=Object(r.useCallback)((function(e){e.preventDefault();var t=n.password,r=n.resetCode;console.log("newPassword",t),console.log("resetCode",r),u(P(t,r)),a(Object(ne.a)(Object(ne.a)({},n),{},{password:""}))}),[u,n]);return i?Object(ae.jsx)(l.a,{to:{pathname:"/"}}):o?(console.log("has reset password"),Object(ae.jsx)(l.a,{to:{pathname:"/login"}})):s||"yes"===_("canResetPassword")?Object(ae.jsx)("div",{className:ot.a.wrap,children:Object(ae.jsxs)("form",{className:"auth-form "+ot.a.form,onSubmit:m,children:[Object(ae.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(ae.jsx)(de.PasswordInput,{value:n.password,name:"password",size:"default",onChange:b}),Object(ae.jsx)(de.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:n.resetCode,name:"resetCode",onChange:b,error:!1,errorText:""}),Object(ae.jsx)(de.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(ae.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"," ",Object(ae.jsx)(he.b,{to:"/login",className:"text_color_link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}):Object(ae.jsx)(l.a,{to:{pathname:"/forgot-password"}})}var bt=n(40),mt=n.n(bt),pt=n(112),ft=n.n(pt),_t=n(87),ht=n.n(_t),Ot=function(e){var t=e.children,n=e.value,r=e.isActive,c=e.onClick,i="".concat(ht.a.tab," ").concat(r?ht.a.tab_type_current:""),s=a.a.useCallback((function(){"function"!==typeof c||r||c(n)}),[c,n,r]);return Object(ae.jsx)("div",{className:"".concat(i," pt-4 pr-10 pb-4 noselect"),onClick:s,children:Object(ae.jsx)("span",{className:"text text_type_main-medium",children:t})})},gt=function(e){var t=e.activeTab,n=Object(r.useState)(t),a=Object(ve.a)(n,1)[0],c=Object(l.g)(),i=j(),s=function(e){"profile"===e&&c.replace({pathname:"/profile"}),"orderHistory"===e&&c.replace({pathname:"/profile/orders"}),"logOut"===e&&i(T())};return Object(ae.jsxs)("nav",{className:ft.a.menu,children:[Object(ae.jsx)(Ot,{value:"profile",isActive:"profile"===a,onClick:s,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(ae.jsx)(Ot,{value:"orderHistory",isActive:"orderHistory"===a,onClick:s,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(ae.jsx)(Ot,{value:"logOut",isActive:!1,onClick:s,children:"\u0412\u044b\u0445\u043e\u0434"}),Object(ae.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})};function xt(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(ve.a)(e,2),n=t[0],a=t[1],c=d((function(e){return e.user})),i=c.userName,s=c.userEmail,o=j();Object(r.useEffect)((function(){o(M())}),[o]),Object(r.useEffect)((function(){a(Object(ne.a)(Object(ne.a)({},n),{},{name:i,email:s}))}),[]);var l=function(e){a(Object(ne.a)(Object(ne.a)({},n),{},Object(it.a)({},e.target.name,e.target.value)))};return Object(ae.jsxs)("section",{className:mt.a.wrap,children:[Object(ae.jsx)(gt,{activeTab:"profile"}),Object(ae.jsxs)("form",{className:mt.a.profileInfo+" profile-inputs",onSubmit:function(e){e.preventDefault(),o(R(n,a))},children:[Object(ae.jsx)(de.Input,{type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n.name,onChange:l,icon:"EditIcon",error:!1}),Object(ae.jsx)(de.Input,{type:"text",name:"email",placeholder:"e-mail",value:n.email,onChange:l,icon:"EditIcon",error:!1}),Object(ae.jsx)(de.Input,{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:n.password,onChange:l,size:"default",icon:"EditIcon",error:!1}),Object(ae.jsxs)("div",{className:mt.a.buttonWrap,children:[Object(ae.jsx)(de.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(ae.jsx)(de.Button,{onClick:function(e){e.preventDefault(),a({name:i,email:s,password:""})},type:"secondary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})}var vt="WS_OPEN_CONNECTION",yt="WS_CONNECTED_SUCCESSFULLY",It="WS_ERROR",Nt="WS_GOT_ORDERS",Ct="WS_SEND_MESSAGE",Dt="WS_CLOSE_CONNECTION",kt="WS_DISCONNECTED",St="SET_DETAILED_ORDER_IN_MODAL",Et={openConnection:vt,onOpen:yt,onError:It,onGotOrders:Nt,sendMessage:Ct,closeConnection:Dt,onClose:kt,setOrderInModal:St},wt=n(33),Tt=n.n(wt);function Lt(e){var t=e.orderData,n=e.isPersonal,r=j(),a=Object(l.g)(),c=Object(l.h)(),i=d((function(e){return e.burgerVendor.ingridientsData.arrOfIngridients})),s=[];i&&t&&i.filter((function(e){return t.ingredients.includes(e._id)})).forEach((function(e){s.push(e.image_mobile)}));var o=[];o=function(e){if(e.length<1)return[];var t=e.map((function(e){return e}));return t.length>5&&(t.length=5),t.reverse(),t}(s);return Object(ae.jsxs)("article",{className:Tt.a.main,onClick:function(){r({type:J}),r({type:Y,value:"OrderCard"}),r({type:St,orderData:t}),n?a.push({pathname:"".concat(a.location.pathname,"/").concat(t._id),state:{profileOrderModal:c}}):a.push({pathname:"".concat(a.location.pathname,"/").concat(t._id),state:{feedModal:c}})},children:[Object(ae.jsxs)("div",{className:Tt.a.plane+" mb-6",children:[Object(ae.jsxs)("span",{className:Tt.a.number+" text text_type_digits-default",children:["#",t.number]}),Object(ae.jsx)("span",{className:" text text_type_main-default text_color_inactive",children:We(t.createdAt)})]}),Object(ae.jsx)("h4",{className:Tt.a.header+" text text_type_main-medium mb-2",children:t.name}),n?Object(ae.jsx)("span",{className:" text text_type_main-default text_color_inactive mb-2",children:Ye(t.status)}):null,Object(ae.jsxs)("div",{className:Tt.a.plane,children:[Object(ae.jsx)("div",{className:Tt.a.iconsContainer,children:o&&o.map((function(e,t){return function(e,t){return Object(ae.jsx)("div",{className:Tt.a.imgContainer,style:{backgroundImage:"url(".concat(e,")")}},t)}(e,t)}))}),Object(ae.jsxs)("div",{className:Tt.a.price,children:[Object(ae.jsx)("span",{className:" text text_type_digits-default mr-2",children:Ze(qe(t,i))}),Object(ae.jsx)(de.CurrencyIcon,{type:"primary"})]})]})]})}var Pt=n(113),Rt=n.n(Pt);function Bt(e){var t=e.isPersonal,n=d((function(e){return e.ws.ordersData.orders})),r=[];return n&&t&&(r=(r=n.slice()).reverse()),Object(ae.jsxs)("article",{className:Rt.a.main,children:[!t&&n&&n.map((function(e){return Object(ae.jsx)(Lt,{orderData:e,isPersonal:t},e.number)})),t&&r&&r.map((function(e){return Object(ae.jsx)(Lt,{orderData:e,isPersonal:t},e.number)}))]})}function At(){var e=j();return Object(r.useEffect)((function(){e(M())}),[e]),Object(r.useEffect)((function(){return e({type:Et.openConnection,url:v+"?token=".concat(h())}),function(){e({type:Et.closeConnection})}}),[e]),Object(ae.jsxs)("section",{className:mt.a.wrap,children:[Object(ae.jsx)(gt,{activeTab:"orderHistory"}),Object(ae.jsx)("div",{className:mt.a.profileInfo+" profile-inputs",children:Object(ae.jsx)(Bt,{isPersonal:!0})})]})}function Mt(){var e=Object(l.i)().id,t=d((function(e){return e.burgerVendor.ingridientsData})).arrOfIngridients.find((function(t){return t._id===e}));return t?Object(ae.jsx)("div",{style:{paddingTop:80},children:Object(ae.jsx)(pe,{ingredientData:t})}):null}var Vt=n(17),Ht=n.n(Vt);function Ut(){var e=j(),t=d((function(e){return e.ws.ordersData.orders})),n=d((function(e){return e.ws.ordersData.totalToday})),a=d((function(e){return e.ws.ordersData.total})),c=[],i=[];t&&t.forEach((function(e){"done"===e.status?c.push(e.number):i.push(e.number)}));var s=function(e,t){return Object(ae.jsx)("li",{className:Ht.a.liElem+" text text_type_digits-default mb-2",children:e},t)};return Object(r.useEffect)((function(){return e({type:Et.openConnection,url:y}),function(){e({type:Et.closeConnection})}}),[e]),Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("section",{className:Ht.a.headerSection,children:Object(ae.jsx)("h1",{className:"text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(ae.jsxs)("section",{className:Ht.a.feedData,children:[Object(ae.jsx)("section",{className:Ht.a.feedContent,children:Object(ae.jsx)(Bt,{isPersonal:!1})}),Object(ae.jsxs)("section",{className:Ht.a.feedChart,children:[Object(ae.jsxs)("div",{className:Ht.a.currentOrders,children:[Object(ae.jsxs)("div",{className:Ht.a.currentChart,children:[Object(ae.jsx)("span",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b"}),Object(ae.jsx)("ul",{className:Ht.a.ul,style:{color:"#00CCCC"},children:c.slice(0,18).map((function(e){return s(e,e)}))})]}),Object(ae.jsxs)("div",{className:Ht.a.currentChart,children:[Object(ae.jsx)("span",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(ae.jsx)("ul",{className:Ht.a.ul,children:i.slice(0,18).map((function(e){return s(e,e)}))})]})]}),Object(ae.jsxs)("div",{className:Ht.a.totalChart,children:[Object(ae.jsxs)("div",{className:Ht.a.totalBlock,children:[Object(ae.jsx)("span",{className:Ht.a.bigHeader+" text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f"}),Object(ae.jsx)("span",{className:" text text_type_digits-large mb-15",children:a})]}),Object(ae.jsxs)("div",{className:Ht.a.totalBlock,children:[Object(ae.jsx)("span",{className:Ht.a.bigHeader+" text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(ae.jsx)("span",{className:" text text_type_digits-large mb-15",children:n})]})]})]})]})]})}var Gt=function(e){var t,n=e.orderSource,a=j(),c=Object(l.i)().id,i=d((function(e){return e.ws.ordersData.orders}));return i&&(t=i.find((function(e){return e._id===c})),a({type:St,orderData:t})),Object(r.useEffect)((function(){return"feed"===n&&a({type:Et.openConnection,url:y}),"personalOrder"===n&&a({type:Et.openConnection,url:v+"?token=".concat(h())}),function(){a({type:Et.closeConnection})}}),[a,n]),Object(ae.jsxs)(ae.Fragment,{children:[i&&t?Object(ae.jsx)(ct,{}):null,Object(ae.jsx)("br",{})]})};var Ft,zt=function(){var e=Object(l.g)(),t=Object(l.h)(),n="PUSH"===e.action||"REPLACE"===e.action,a=n&&t.state&&t.state.ingredientModal,c=n&&t.state&&t.state.feedModal,i=n&&t.state&&t.state.profileOrderModal,s=d((function(e){return e.burgerVendor})).ingrInModalData,u=j();return Object(r.useEffect)((function(){u(M()),u(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){fetch(e).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){if(!Array.isArray(e.data))return Promise.reject(e);t({type:F,value:e.data})})).catch((function(e){t({type:z})}))}}("https://norma.nomoreparties.space/api/ingredients"))}),[u]),Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(Oe,{}),Object(ae.jsxs)("main",{className:o.a.main,children:[Object(ae.jsxs)(l.d,{location:a||c||i||t,children:[Object(ae.jsx)(l.b,{path:"/login",children:Object(ae.jsx)(lt,{})}),Object(ae.jsx)(l.b,{path:"/registration",children:Object(ae.jsx)(ut,{})}),Object(ae.jsx)(l.b,{path:"/forgot-password",children:Object(ae.jsx)(dt,{})}),Object(ae.jsx)(l.b,{path:"/reset-password",children:Object(ae.jsx)(jt,{})}),Object(ae.jsx)(ce,{path:"/profile",exact:!0,children:Object(ae.jsx)(xt,{})}),Object(ae.jsx)(ce,{path:"/profile/orders",exact:!0,children:Object(ae.jsx)(At,{})}),Object(ae.jsx)(ce,{path:"/profile/orders/:id",children:Object(ae.jsx)(Gt,{orderSource:"personalOrder"})}),Object(ae.jsx)(l.b,{path:"/ingredients/:id",children:Object(ae.jsx)(Mt,{})}),Object(ae.jsx)(l.b,{path:"/feed",exact:!0,children:Object(ae.jsx)(Ut,{})}),Object(ae.jsx)(l.b,{path:"/feed/:id",children:Object(ae.jsx)(Gt,{orderSource:"feed"})}),Object(ae.jsx)(l.b,{path:"/",exact:!0,children:Object(ae.jsx)(nt,{})})]}),a&&Object(ae.jsx)(l.b,{path:"/ingredients/:id",children:Object(ae.jsx)(je,{children:Object(ae.jsx)(pe,{ingredientData:s})})}),c&&Object(ae.jsx)(l.b,{path:"/feed/:id",children:Object(ae.jsx)(je,{children:Object(ae.jsx)(ct,{})})}),i&&Object(ae.jsx)(ce,{path:"/profile/orders/:id",children:Object(ae.jsx)(je,{children:Object(ae.jsx)(ct,{})})})]})]})},Jt=n(36),Wt=n(88),Yt=n(114),Zt=n.n(Yt),qt={_id:"",name:"",type:"main",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",__v:0,instanceID:0},Xt={ingridientsData:{arrOfIngridients:[],ingrDataIsLoading:!1,ingrDataHasError:!1},bun:qt,draggableIngridients:[],modalIsVisible:!1,currentModalType:"none",ingrInModalData:{_id:"",name:"",type:"main",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",__v:0},orderData:{success:!1,name:"",order:{number:""}},constructorLoaderIsVisible:!1},Kt={isLoggedIn:!1,userName:"",userEmail:"",canResetPassword:!1,hasResetPassword:!1,userChecked:!1},Qt={wsConnected:!1,wsError:!1,ordersData:{success:null,orders:[],total:0,totalToday:0},detailedOrder:{ingredients:[],_id:"",status:"pending",number:0,createdAt:"",updatedAt:"",name:""}},$t=Object(Jt.b)({burgerVendor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(ne.a)(Object(ne.a)({},e),{},{modalIsVisible:t.value});case H:return Object(ne.a)(Object(ne.a)({},e),{},{currentModalType:t.value});case U:return Object(ne.a)(Object(ne.a)({},e),{},{ingrInModalData:t.value});case G:return Object(ne.a)(Object(ne.a)({},e),{},{orderData:t.value});case F:return Object(ne.a)(Object(ne.a)({},e),{},{ingridientsData:{arrOfIngridients:t.value,ingrDataIsLoading:!1,ingrDataHasError:!1}});case z:return Object(ne.a)(Object(ne.a)({},e),{},{ingridientsData:{arrOfIngridients:[],ingrDataIsLoading:!1,ingrDataHasError:!0}});case J:return Object(ne.a)(Object(ne.a)({},e),{},{modalIsVisible:!0});case W:return Object(ne.a)(Object(ne.a)({},e),{},{modalIsVisible:!1});case Y:return Object(ne.a)(Object(ne.a)({},e),{},{currentModalType:t.value});case Z:return Object(ne.a)(Object(ne.a)({},e),{},{bun:t.value});case q:case X:return Object(ne.a)(Object(ne.a)({},e),{},{draggableIngridients:[].concat(Object(Wt.a)(e.draggableIngridients),[t.value])});case K:return Object(ne.a)(Object(ne.a)({},e),{},{draggableIngridients:t.value});case $:var n=Zt()(e.draggableIngridients,{$splice:[[t.indexOfDraggedIngr,1],[t.indexOfDroppedIngr,0,e.draggableIngridients[t.indexOfDraggedIngr]]]});return Object(ne.a)(Object(ne.a)({},e),{},{draggableIngridients:n});case Q:return Object(ne.a)(Object(ne.a)({},e),{},{bun:qt,draggableIngridients:[]});case ee:return Object(ne.a)(Object(ne.a)({},e),{},{constructorLoaderIsVisible:t.value});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case N:return Object(ne.a)(Object(ne.a)({},e),{},{isLoggedIn:!0,userName:t.name,userEmail:t.email,userChecked:!0});case C:case D:return Object(ne.a)(Object(ne.a)({},e),{},{isLoggedIn:!1,userName:"",userEmail:"",userChecked:!0});case k:return Object(ne.a)(Object(ne.a)({},e),{},{canResetPassword:!0,hasResetPassword:!1,userChecked:!0});case S:return Object(ne.a)(Object(ne.a)({},e),{},{userChecked:!0,canResetPassword:!1,hasResetPassword:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return Object(ne.a)(Object(ne.a)({},e),{},{wsConnected:!0,wsError:!1});case Nt:return Object(ne.a)(Object(ne.a)({},e),{},{ordersData:t.ordersData});case kt:return Object(ne.a)(Object(ne.a)({},e),{},{wsConnected:!1});case It:return Object(ne.a)(Object(ne.a)({},e),{},{wsConnected:!1,wsError:!0});case St:return Object(ne.a)(Object(ne.a)({},e),{},{detailedOrder:t.orderData});default:return e}}}),en=n(115),tn=(Ft=Et,function(e){var t=null;return function(n){return function(r){var a=e.dispatch,c=r.type,i=r.payload,s=Ft.openConnection,o=Ft.onOpen,l=Ft.onError,u=Ft.onGotOrders,d=Ft.onClose,j=Ft.sendMessage,b=Ft.closeConnection;c===s&&(t=new WebSocket(r.url)),t&&c===b&&(t.close(),t=null),t&&(t.onopen=function(){a({type:o})},t.onerror=function(e){a({type:l})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);a({type:u,ordersData:n})},t.onclose=function(){a({type:d})}),t&&c===j&&t.send(JSON.stringify(Object(ne.a)(Object(ne.a)({},i),{},{token:h()}))),n(r)}}}),nn=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Jt.c)(Object(Jt.a)(en.a,tn)),rn=Object(Jt.d)($t,nn);i.a.render(Object(ae.jsx)(a.a.StrictMode,{children:Object(ae.jsx)(he.a,{basename:"/react-stellar-burgers",children:Object(ae.jsx)(u.a,{store:rn,children:Object(ae.jsx)(zt,{})})})}),document.getElementById("root"))},27:function(e,t,n){e.exports={wrap:"auth-form_wrap__3RVAe",form:"auth-form_form__rX39Z"}},32:function(e,t,n){e.exports={ingridiensContainer:"burger-ingredients_ingridiensContainer__3BQrh",tabs:"burger-ingredients_tabs__1l8_J",ingrDisplay:"burger-ingredients_ingrDisplay__1icPp",ingrShowcase:"burger-ingredients_ingrShowcase__2NIYC",ingrList:"burger-ingredients_ingrList__6P8Qc",zaglushka:"burger-ingredients_zaglushka__2SUDu"}},33:function(e,t,n){e.exports={main:"feed-card_main__2ST8h",plane:"feed-card_plane__1mDgz",number:"feed-card_number__lJRyI",header:"feed-card_header__M8EXj",price:"feed-card_price__32Lqy",iconsContainer:"feed-card_iconsContainer__3AZZ8",imgContainer:"feed-card_imgContainer__BfOuM"}},38:function(e,t,n){e.exports={container:"burger-constructor_container__103lO",chosenIngridients:"burger-constructor_chosenIngridients__1gAGd",topIngridinet:"burger-constructor_topIngridinet__957Y3",bottomIngridinet:"burger-constructor_bottomIngridinet__Ab3_v",draggableIngridinetContainer:"burger-constructor_draggableIngridinetContainer__2t25h",draggableItime:"burger-constructor_draggableItime__19vpI",draggableButton:"burger-constructor_draggableButton__1z_cB",totalBar:"burger-constructor_totalBar__22PBG",loader:"burger-constructor_loader__21tyw"}},40:function(e,t,n){e.exports={wrap:"profile_wrap__3CJnb",profileInfo:"profile_profileInfo__U7vrM",buttonWrap:"profile_buttonWrap__3iOLH"}},61:function(e,t,n){e.exports={ingrCard:"ingridient-card_ingrCard__2GnK_",price:"ingridient-card_price__2JkM8",itemPic:"ingridient-card_itemPic__1LVUZ",counter:"ingridient-card_counter__24YZf"}},82:function(e,t,n){e.exports={modal:"modal_modal__hc1-g",closeButton:"modal_closeButton__1nd5o"}},83:function(e,t,n){e.exports={headerSection:"burger-vendor_headerSection__1BgLE",constructorContainer:"burger-vendor_constructorContainer__GiZwe"}},85:function(e,t,n){e.exports={draggableItime:"draggable-item_draggableItime__3bG_l",draggableButton:"draggable-item_draggableButton__3ro-k"}},87:function(e,t,n){e.exports={tab:"profile-tab_tab__2JNML",tab_type_current:"profile-tab_tab_type_current__33H-l"}}},[[198,1,2]]]);
//# sourceMappingURL=main.16cf4a93.chunk.js.map